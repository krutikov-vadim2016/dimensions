# dimensions

#Проблема решена в обновлениях битрикса
#Импорт из 1С полей размеров товара"
#Модуль: iblock, версия: 20.0.400

Выгружаем габариты из 1с в битрикс

Для начала необходимо выгрузить габариты из 1с в xml. Аналогично тому как выгружается вес. Пример части файла offers.xml

			<Предложение>
				<Цены>
					<Цена>
						<Представление> 811 руб. за PCE</Представление>
						<ИдТипаЦены>838a732e-0e2f-11e7-81e8-005056c00008</ИдТипаЦены>
						<ЦенаЗаЕдиницу>811</ЦенаЗаЕдиницу>
						<Валюта>руб</Валюта>
						<Единица>PCE</Единица>
						<Коэффициент>1</Коэффициент>
					</Цена>
					<Цена>
						<Представление> 811 руб. за PCE</Представление>
						<ИдТипаЦены>79435a7f-9521-11e5-8918-005056c00008</ИдТипаЦены>
						<ЦенаЗаЕдиницу>811</ЦенаЗаЕдиницу>
						<Валюта>руб</Валюта>
						<Единица>PCE</Единица>
						<Коэффициент>1</Коэффициент>
					</Цена>
					<Цена>
						<Представление> 811 руб. за PCE</Представление>
						<ИдТипаЦены>66ba406d-1cd0-11e1-b02a-1c6f6520ad65</ИдТипаЦены>
						<ЦенаЗаЕдиницу>811</ЦенаЗаЕдиницу>
						<Валюта>руб</Валюта>
						<Единица>PCE</Единица>
						<Коэффициент>1</Коэффициент>
					</Цена>
				</Цены>
				<Количество>5</Количество>
				<Склад ИдСклада="6f018bf8-9159-11e3-a591-7054d23d3db1"/>
				<Склад ИдСклада="22813e87-e152-11e8-80d8-ac1f6b26ad7d"/>
				<Ид>6e1ec77f-620c-11e1-8157-1c6f6520ad65#6e1ec77e-620c-11e1-8157-1c6f6520ad65</Ид>
				<Штрихкод>4008429022128</Штрихкод>
				<Артикул>10200</Артикул>
				<Наименование>ТОвар</Наименование>
				<БазоваяЕдиница Код="796" НаименованиеПолное="Штука" МеждународноеСокращение="PCE">
					<Пересчет>
						<Единица>796</Единица>
						<Коэффициент>1</Коэффициент>
					</Пересчет>
				</БазоваяЕдиница>
				<ХарактеристикиТовара>
					<ХарактеристикаТовара>
						<Ид>6e1ec77e-620c-11e1-8157-1c6f6520ad65</Ид>
						<Наименование>5 л</Наименование>
						<Значение>5 л</Значение>
						<Артикул>10200</Артикул>
					</ХарактеристикаТовара>
				</ХарактеристикиТовара>
				<ЗначенияРеквизитов>
					<ЗначениеРеквизита>
						<Наименование>Зачеркнутая цена</Наименование>
						<Значение>0</Значение>
					</ЗначениеРеквизита>
				</ЗначенияРеквизитов>
				<Вес>5.2</Вес>
				<Ширина>250</Ширина>
				<Глубина>150</Глубина>
				<Высота>260</Высота>
			</Предложение>

В папке /bitrix/admin создаем файл 1c_exchange_custom.php. Туда пишем
<code>
require_once($_SERVER["DOCUMENT_ROOT"]."/local/1c/1c_exchange_custom.php");
</code>

Создаем файл  /local/1c/1c_exchange_custom.php и копируем в него содержимое файла /bitrix/modules/sale/admin/1c_exchange.php.

В файле /local/1c/1c_exchange_custom.php находим подключение компонента bitrix:catalog.import.1c и заменяем на компонент из своего простанства имен, например nikolaus:catalog.import.1c. 
Следовательно копируем компонент bitrix:catalog.import.1c в новое пространство, например /local/components/nikolaus.
Открываем файл component.php нового компонента и заменяем вызов старого класса CIBlockCMLImport на новый CIBlockCMLImportCustom.

Необходимо подключить новый класс в компоненте. Для этого добавляем 

<code>
use Bitrix\Main\Loader;
Loader::registerAutoLoadClasses(
	null,
	array(
		'CIBlockCMLImportCustom' => '/local/1c/cml2_custom.php'
	)
);
</code>

сразу после строки 
<code>
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();
</code>
	
Сохраняем файл.

Обмен с 1с запускаем через новый скрипт /bitrix/admin/1c_exchange_custom.php.

